#include <stdio.h>      //ㅐPRINTF, scanf를 사용하기 위해서 헤더 추가
#include <stdlib.h>    // rand, srand를 사용하기 위해서 헤더 추가
#include <time.h>   // time 함수를 사용하기 위해서 헤더 추가

int main(void)      //프로그램을 실행하는 main 함수
{                   //메인함수의 시작
    int ball[3]; // 3개의 난수 저장 배열
    srand(time(NULL)); // 난수 초기화
    // 중복 없는 3자리 난수 생성
    do { // 동일한 코드를 특정 조건일때 반복한다.
        ball[0] = rand() % 10; // %10은 10을 제외한 나머지 0~9까지
        ball[1] = rand() % 10; // %10은 10을 제외한 나머지 0~9까지
        ball[2] = rand() % 10; // %10은 10을 제외한 나머지 0~9까지
    } while (ball[0] == ball[1] || ball[0] == ball[2] || ball[1] == ball[2]); // 3개가 전부 거짓이 나올때까지 랜덤으로 숫자를 생성한다.
 /** A == B - A
     A == C - B
     B == C - C
     A || B || C -> A참이거나 B가 참이거나 C가 참이면 - 참
     A가 참 || B 거짓 || C 거짓 - 참

     A가 참이어야하고 B도 참이어야 하고 C도 참이어야 함 - 참
     A가 참 && B가 거짓 && C가 거짓 - 거짓
     A가 참 && B가 참ㄱ && C 참 - 참 **/

    //printf("baseball : %d %d %d\n", ball[0], ball[1], ball[2]); // 정답 확인용(테스트시만)

    int input[3]; // 사용자로부터 입력을 받는곳
    int strike_count = 0 ; // 판정을 해서 숫자를 여기에 저장한다.
    int ball_count = 0 ;  // 판정을 해서 숫자를 여기에 저장한다.
    int out_count = 0; // 판정을 해서 숫자를 여기에 저장한다.
    int try_count = 0; // 판정을 해서 숫자를 여기에 저장한다.

    clock_t start, end; // 실행 시작 시간 기록 // 실행 종료 시간 기록
    start = clock(); // 게임 시작 시간 기록

    while (1) { //반복문 시작
        printf("\n숫자 3개를 입력하세요 (공백으로 구분): "); // 스캔에서 %d 공백으로 작성을 하면 공백에 맞춰서 입력을 받는다.
        scanf("%d %d %d", &input[0], &input[1], &input[2]); // 공백을 맞춰서 입력을 받았을때 출력한다.

        strike_count = 0; // 판정을 해서 숫자를 여기에 저장한다.
        ball_count = 0; // 판정을 해서 숫자를 여기에 저장한다.

        // strike, ball 판정
        for (int i = 0; i < 3; i++) // i은 0으로 초기화한다 3보다 작을때 1씩 증가
        { // for 함수 시작
            if (input[i] == ball[i]) // 위치가 동일할때 증가한다,
            { // if 함수 시작
                strike_count++; // 조건을 만족하면 증가한다.
            } // if 함수 종료
            
            else if (input[i] == ball[(i+1)%3] || input[i] == ball[(i+2)%3]) // 거짓일때 증가한 만큼 더하고 3으로 나눈다.
            { // else if 함수 시작
                ball_count++; // 조건을 만족하면 증가한다.
            } // else if 함수 종료
        } // for 함수 종료

        out_count = 3 - (strike_count + ball_count); // 스트라이크 와 볼을 더한걸 아웃 3으로 빼서 아웃에 개수를 알려주는 코드이다.
        
        try_count++; // 시도횟수 카운트

        if (strike_count == 3) // 숫자 3개가 맞을경우 조건문
        { // if 함수 시작
            end = clock(); // 게임 종료 시간 기록            
            double elapsed_sec = (double)(end - start) / CLOCKS_PER_SEC; // 얼마나 실행이 됬는지 초 단위로 환산해서 저장하는 코드
            printf("Home Run! %d번 만에 맞췄습니다!\n", try_count); // 시도횟수 카운트가 증가한걸 반영하여 식각화 하고 시스템 종료
            printf("%f 초 시간이 걸렸습니다.\n", elapsed_sec); // 숫자를 몇초만에 맞췄는지 출력한다.
            break; // 종료한다.
        } // if 함수 종료
        
        else // 거짓일때.
        { // else 함수 시작
            printf("%d Strike, %d Ball, %d Out\n", strike_count, ball_count, out_count); // 위에 조건문에 의해서 증가한 횟수를 시각화 출력
        } // else 함수 종료
    } // 반복문 종료
    return 0; // 시스템 종료
} // main 함수 종료
